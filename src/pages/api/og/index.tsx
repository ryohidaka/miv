import { APP_NAME, DESCRIPTION } from "@/modules/const";
import { ImageResponse } from "@vercel/og";
import React from "react";

export const config = {
  runtime: "experimental-edge",
};

/**
 * OG画像
 *
 * @see https://fullstackheroes.com/resources/vercel-og-templates/branded-logo/
 * @param req
 * @returns
 */
export default function handler() {
  const option = {
    width: 1200,
    height: 627,
  };

  try {
    return new ImageResponse(
      (
        <div
          style={{
            backgroundImage:
              "linear-gradient(to right, #24243e, #302b63, #0f0c29)",
          }}
          tw="h-full w-full flex items-start justify-start"
        >
          <div tw="flex items-start justify-start h-full">
            <div tw="flex flex-col justify-between w-full h-full p-10">
              <header tw="grid">
                {/* ロゴ */}
                <svg
                  width="80"
                  height="80"
                  viewBox="0 0 300 300"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M188.098 38.0149C191.83 34.2837 196.89 32.1875 202.167 32.1875H258.042C263.318 32.1875 268.379 34.2838 272.11 38.0149C275.841 41.746 277.937 46.8066 277.937 52.0833V91.8333C277.937 97.1101 275.841 102.171 272.11 105.902C268.379 109.633 263.319 111.729 258.042 111.729H235.099L206.146 126.081V111.729H202.167C196.89 111.729 191.829 109.633 188.098 105.902C184.367 102.171 182.271 97.1101 182.271 91.8333V52.0833C182.271 46.8066 184.367 41.746 188.098 38.0149ZM202.167 40.1459C199 40.1459 195.964 41.4035 193.726 43.6423C191.487 45.881 190.229 48.9174 190.229 52.0833V91.8333C190.229 94.9993 191.487 98.0355 193.726 100.274C195.965 102.513 199 103.771 202.167 103.771H214.104V113.253L233.235 103.771H258.042C261.207 103.771 264.243 102.513 266.482 100.274C268.721 98.0355 269.979 94.9993 269.979 91.8333V52.0833C269.979 48.9174 268.721 45.881 266.482 43.6423C264.243 41.4035 261.207 40.1459 258.042 40.1459H202.167ZM210.104 58.0417C210.104 52.553 214.554 48.1041 220.042 48.1041C225.53 48.1041 229.979 52.5534 229.979 58.0417C229.979 63.0426 226.285 67.1807 221.477 67.8763L226.449 75.3579L238.501 56.6518L261.17 91.8542L198.685 91.8542L215.39 66.8254C212.246 65.1569 210.104 61.8496 210.104 58.0417ZM221.755 82.6744L218.076 77.1371L213.565 83.8958L220.98 83.8958L221.755 82.6744ZM230.415 83.8958H246.58L238.499 71.3481L230.415 83.8958ZM220.042 56.0625C218.948 56.0625 218.062 56.949 218.062 58.0417C218.062 59.1343 218.948 60.0208 220.042 60.0208C221.134 60.0208 222.021 59.1347 222.021 58.0417C222.021 56.9486 221.134 56.0625 220.042 56.0625Z"
                    fill="white"
                  />
                  <path
                    d="M183.303 234.327H179.901C187.49 222.577 186.015 203.689 185.81 201.468C185.667 199.919 184.896 198.498 183.674 197.535C182.453 196.571 180.892 196.15 179.353 196.373C177.826 196.592 168.413 198.071 159.555 202.302C165.922 191.896 167.774 179.984 164.739 168.633C164.555 167.946 164.351 167.261 164.131 166.581C169.252 164.245 173.616 160.592 176.843 156.106H181.981C185.114 156.106 187.655 153.565 187.655 150.431C187.655 147.313 185.139 144.784 182.026 144.759C182.577 142.425 182.871 140.006 182.871 137.536C182.871 119.951 168.566 105.646 150.982 105.646C137.269 105.646 118.053 117.124 92.234 140.735C71.4305 159.759 50.6805 182.595 35.53 199.268C33.1456 201.892 30.9147 204.347 28.8635 206.588C27.2456 208.355 26.882 210.878 27.9359 213.014C29.7454 216.684 33.3984 216.448 37.2676 216.197C39.6731 216.042 42.9356 215.758 46.7128 215.429C56.1934 214.604 78.1047 212.694 83.0031 214.133C91.139 221.533 101.897 225.747 113.173 226.295V234.327H31.6973C28.563 234.327 26.0228 236.868 26.0228 240.001C26.0228 243.135 28.5634 245.676 31.6973 245.676H49.1995C48.0441 251.341 46.2084 267.022 58.447 276.679C67.8595 284.107 82.7742 285.355 91.745 285.355C95.523 285.355 98.2479 285.133 99.0625 285.059C100.611 284.916 102.032 284.145 102.996 282.923C103.959 281.703 104.379 280.141 104.158 278.602C103.815 276.217 100.855 257.435 91.2179 245.677H183.303C186.437 245.677 188.978 243.136 188.978 240.002C188.978 236.868 186.437 234.327 183.303 234.327ZM91.67 273.994C83.6007 273.955 71.8014 272.76 65.4771 267.77C58.881 262.565 59.4247 253.375 60.1134 249.088C64.1338 247.416 72.9396 244.756 79.5314 249.958C85.8319 254.93 89.7465 266.146 91.67 273.994ZM124.524 234.326V225.604C126.103 225.334 127.679 224.995 129.245 224.576C134.399 223.197 139.219 221.084 143.583 218.354C141.691 224.186 142.492 230.011 143.74 234.326H124.524ZM126.313 213.612C113.221 217.115 99.4103 213.966 90.2737 205.397C88.0374 203.301 84.1867 202.296 75.7249 202.296C69.1939 202.296 59.9137 202.895 46.5158 204.054C61.2454 187.856 80.6272 166.728 99.8928 149.11C128.918 122.567 143.695 116.995 150.981 116.995C162.307 116.995 171.522 126.209 171.522 137.536C171.522 147.123 164.733 155.56 155.38 157.599C153.664 157.973 152.218 159.121 151.464 160.708C150.71 162.294 150.733 164.14 151.526 165.707C152.484 167.599 153.24 169.57 153.774 171.566C156.061 180.118 154.528 189.175 149.458 197.068C144.278 205.13 136.059 211.006 126.313 213.612ZM169.681 229.146C165.797 234.069 158.969 233.888 155.388 233.385C154.066 230.018 152.304 223.415 156.185 218.497C159.969 213.702 168.327 210.595 174.67 208.933C174.517 215.452 173.439 224.384 169.681 229.146Z"
                    fill="white"
                  />
                  <path
                    d="M205.892 238.895C205.818 238.531 205.705 238.173 205.563 237.828C205.421 237.487 205.251 237.157 205.047 236.851C204.838 236.539 204.599 236.25 204.337 235.988C204.077 235.728 203.787 235.489 203.475 235.285C203.169 235.075 202.839 234.905 202.499 234.763C202.152 234.621 201.795 234.507 201.432 234.439C200.705 234.292 199.951 234.292 199.219 234.439C198.855 234.507 198.497 234.621 198.157 234.763C197.811 234.905 197.482 235.075 197.176 235.285C196.863 235.489 196.574 235.727 196.313 235.988C196.052 236.249 195.814 236.539 195.609 236.851C195.406 237.157 195.229 237.487 195.087 237.828C194.945 238.173 194.838 238.531 194.764 238.895C194.69 239.258 194.651 239.632 194.651 240.001C194.651 240.369 194.69 240.745 194.764 241.107C194.838 241.471 194.945 241.828 195.087 242.168C195.229 242.515 195.405 242.843 195.609 243.15C195.814 243.462 196.052 243.751 196.313 244.012C196.574 244.274 196.864 244.512 197.176 244.716C197.482 244.92 197.811 245.096 198.157 245.238C198.498 245.38 198.855 245.494 199.219 245.562C199.582 245.636 199.956 245.675 200.325 245.675C200.693 245.675 201.068 245.636 201.432 245.562C201.795 245.494 202.152 245.38 202.499 245.238C202.839 245.096 203.168 244.92 203.475 244.716C203.787 244.512 204.076 244.274 204.337 244.012C204.599 243.751 204.837 243.462 205.047 243.15C205.251 242.843 205.421 242.514 205.563 242.168C205.705 241.828 205.819 241.471 205.892 241.107C205.966 240.744 206 240.369 206 240.001C206 239.632 205.966 239.257 205.892 238.895Z"
                    fill="white"
                  />
                  <path
                    d="M20.2359 238.895C20.1621 238.531 20.0543 238.173 19.9123 237.828C19.7704 237.487 19.5945 237.157 19.3902 236.851C19.1859 236.539 18.9477 236.25 18.6865 235.989C18.4256 235.728 18.1359 235.489 17.8238 235.285C17.5176 235.075 17.1882 234.905 16.8423 234.763C16.5018 234.621 16.1443 234.507 15.7811 234.439C15.0489 234.286 14.2944 234.292 13.5622 234.439C13.2047 234.507 12.8473 234.621 12.501 234.763C12.1605 234.905 11.8315 235.075 11.5248 235.285C11.2128 235.489 10.9234 235.727 10.6622 235.989C10.4013 236.249 10.1628 236.539 9.95268 236.851C9.74837 237.157 9.57253 237.487 9.43055 237.828C9.29435 238.173 9.18084 238.531 9.10696 238.895C9.03963 239.258 9 239.632 9 240.001C9 240.369 9.03963 240.745 9.11351 241.107C9.18161 241.471 9.29512 241.828 9.43709 242.168C9.57907 242.515 9.74914 242.843 9.95345 243.15C10.1635 243.462 10.4017 243.751 10.663 244.012C10.9242 244.274 11.2136 244.512 11.5256 244.716C11.8319 244.92 12.1612 245.096 12.5018 245.238C12.848 245.38 13.2055 245.494 13.5629 245.562C13.9319 245.636 14.3063 245.675 14.6753 245.675C15.0443 245.675 15.4187 245.636 15.7819 245.562C16.1451 245.494 16.5025 245.38 16.8431 245.238C17.1894 245.096 17.5183 244.92 17.8246 244.716C18.1366 244.512 18.426 244.274 18.6872 244.012C18.9481 243.752 19.1867 243.462 19.391 243.15C19.5953 242.843 19.7711 242.514 19.9131 242.168C20.0551 241.828 20.1628 241.471 20.2367 241.107C20.3106 240.744 20.3502 240.369 20.3502 240.001C20.349 239.632 20.3094 239.257 20.2359 238.895Z"
                    fill="white"
                  />
                  <path
                    d="M143.356 169.147C143.314 168.99 143.247 168.763 143.147 168.471C141.482 163.592 137.818 159.593 133.094 157.498C128.345 155.392 122.886 155.364 118.116 157.422C102.471 164.172 67.5933 186.821 66.1161 187.782C65.7145 188.044 65.3478 188.355 65.0242 188.708C63.4451 190.434 63.0734 192.998 64.1077 195.096C65.8564 198.641 69.4967 198.406 71.6718 198.265C73.0088 198.179 74.7972 198.023 76.8673 197.842C81.4656 197.442 91.8589 196.537 95.219 196.979C100.388 201.415 107.175 203.797 114.181 203.797C116.852 203.797 119.555 203.452 122.212 202.741C129.627 200.758 135.913 196.237 139.913 190.011C144.021 183.615 145.244 176.202 143.356 169.147ZM130.364 183.877C127.895 187.72 123.959 190.527 119.281 191.778C113.016 193.453 106.437 191.976 102.113 187.92C100.363 186.279 98.0098 185.527 92.4776 185.527C91.9963 185.527 91.4903 185.533 90.9589 185.544C101.877 178.841 114.977 171.137 122.612 167.843C124.512 167.023 126.6 167.034 128.494 167.874C130.351 168.698 131.736 170.201 132.41 172.15C133.434 176.066 132.708 180.228 130.364 183.877Z"
                    fill="white"
                  />
                  <path
                    d="M155.621 135.049C155.553 134.685 155.439 134.328 155.297 133.988C155.155 133.642 154.979 133.313 154.775 133.006C154.571 132.694 154.333 132.405 154.071 132.144C153.81 131.883 153.521 131.644 153.209 131.44C152.902 131.23 152.573 131.06 152.227 130.918C151.887 130.776 151.53 130.662 151.167 130.594C150.435 130.447 149.68 130.447 148.953 130.594C148.59 130.662 148.233 130.776 147.887 130.918C147.546 131.06 147.217 131.23 146.91 131.44C146.598 131.644 146.308 131.882 146.047 132.144C145.786 132.405 145.548 132.694 145.344 133.006C145.14 133.313 144.963 133.642 144.821 133.988C144.68 134.328 144.566 134.685 144.493 135.049C144.419 135.412 144.385 135.787 144.385 136.156C144.385 136.524 144.419 136.899 144.493 137.261C144.566 137.625 144.68 137.983 144.821 138.323C144.963 138.669 145.14 138.998 145.344 139.304C145.548 139.616 145.786 139.906 146.047 140.167C146.308 140.428 146.598 140.666 146.91 140.871C147.217 141.075 147.545 141.251 147.887 141.393C148.233 141.535 148.59 141.648 148.953 141.716C149.317 141.79 149.691 141.83 150.06 141.83C150.428 141.83 150.803 141.79 151.167 141.716C151.53 141.648 151.887 141.535 152.227 141.393C152.573 141.251 152.902 141.075 153.209 140.871C153.521 140.666 153.81 140.428 154.071 140.167C154.333 139.906 154.571 139.616 154.775 139.304C154.979 138.998 155.155 138.669 155.297 138.323C155.439 137.982 155.553 137.625 155.621 137.261C155.695 136.898 155.734 136.524 155.734 136.156C155.734 135.787 155.695 135.412 155.621 135.049Z"
                    fill="white"
                  />
                </svg>

                {/* アプリ名 */}
                <h1 tw="text-[50px] text-white font-bold text-left">
                  {APP_NAME}
                </h1>
              </header>

              {/* 説明文 */}
              <p tw="text-[30px] text-white font-bold">{DESCRIPTION}</p>
            </div>
          </div>
        </div>
      ),
      option
    );
  } catch (e: any) {
    console.log(`${e.message}`);
    return new Response(`Failed to generate the image`, {
      status: 500,
    });
  }
}
